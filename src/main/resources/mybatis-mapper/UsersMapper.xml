<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="project3.yakdo.repository.mybatis.UsersMapper">
	<!-- 회원가입 시 users, users_info_allergy, users_info_using_drugs 정보insert -->
	<insert id="insertUsers">
		INSERT INTO users VALUES (user_no_pk.NEXTVAL, #{userEmail}, #{userPw}, #{userNick}, sysdate, 2, 0, null, null)
	</insert>
	
	<insert id="insertUsersInfo">
		INSERT INTO users_info VALUES (user_no_pk.currval, #{familyNo}, #{birth}, #{gender}, #{weight})
	</insert>
	
	<insert id="insertUsersInfoAllergy">
		INSERT INTO users_info_allergy VALUES (user_no_pk.currval, #{familyNo}, #{allergy})
	</insert>
	
	<insert id="insertUsersUsingDrugs">
		INSERT users_info_using_drugs VALUES (user_no_pk.currval, #{familyNo}, #{usingDrugs})
	</insert>
	
	
	
	<!-- select -->
	<select id="selectByUserEmail" parameterType="String" resultType="Users">
		SELECT user_no, user_email, user_pw, user_nick, join_date
		                , user_grade, user_status, leave_date, block_reason
		FROM users
		WHERE user_email = #{userEmail} AND USER_STATUS = 0
	</select>
	
<!-- 	<select id="selectAllUsers" resultType="Users"> -->
<!-- 		SELECT user_no, user_email, user_pw, user_nick, join_date -->
<!-- 		                , user_grade, user_status, leave_date, block_reason -->
<!-- 		FROM users -->
<!-- 	</select> -->
	
<!-- 	<select id="selectByUserNo" parameterType="Integer" resultType="UsersInfo"> -->
<!-- 		SELECT user_no, family_no, birth, gender, using_drugs -->
<!-- 				, allergy, weight -->
<!-- 		FROM users_info -->
<!-- 		WHERE user_no = #{userNo} -->
<!-- 	</select> -->
	
<!-- 	<select id="selectAllUsersInfo" resultType="UsersInfo"> -->
<!-- 		SELECT user_no, family_no, birth, gender, weight -->
<!-- 		FROM users_info -->
<!-- 	</select> -->
	
<!-- 	<delete id="deleteAllUsersInfo"> -->
<!-- 		DELETE FROM users_info -->
<!-- 	</delete> -->

<!-- 	<delete id="deleteAllUsers"> -->
<!-- 		DELETE FROM users -->
<!-- 	</delete> -->
	
</mapper>